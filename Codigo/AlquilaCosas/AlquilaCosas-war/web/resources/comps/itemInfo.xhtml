<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="var" type="java.lang.Object" required="true" />
        <cc:attribute name="bean" type="java.lang.Object" required="true"  />    
        <cc:attribute name="method" type="java.lang.String" required="true" />
        <cc:attribute name="property" type="java.lang.String" required="true" />
        <cc:attribute name="editable" type="java.lang.Boolean" default="false" />
        <cc:attribute name="editMethod" type="java.lang.String" />
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <div class="item">
            
                <h:panelGrid columns="3" style="border: none; padding: 5px 10px;"
                             cellspacing="0" cellpadding="0" 
                             columnClasses="itemImgCol,itemContentCol,itemPriceCol" > 
                    <h:graphicImage value="/image?id=#{cc.attrs.var.imagenId}" 
                                    width="113" height="85" style="border: 1px solid gray; margin-top: 5px"
                                    rendered="#{cc.attrs.var.imagenId != -1}" />
                    <h:graphicImage value="#{resource['images:noImage.png']}"
                                    width="113" height="85" style="border: 1px solid gray; margin-top: 5px"
                                    rendered="#{cc.attrs.var.imagenId == -1}" />
                    <h:panelGrid style="padding: 0 10px; text-align: left" columns="1"   >
                        <h:commandLink value="#{cc.attrs.var.titulo}"
                                       action="#{cc.attrs.bean[cc.attrs.method]}" 
                                       styleClass="itemTitle" >
                            <f:setPropertyActionListener value="#{cc.attrs.var.id}" target="#{cc.attrs.bean[cc.attrs.property]}" />
                        </h:commandLink>
                        <h:commandLink value="(editar)" rendered="#{cc.attrs.editable}"
                                       action="#{cc.attrs.bean[cc.attrs.editMethod]}" >
                            <f:setPropertyActionListener value="#{cc.attrs.var.id}" target="#{cc.attrs.bean[cc.attrs.property]}" />
                        </h:commandLink>
                        <h:outputText value="(#{cc.attrs.var.ciudad}, #{cc.attrs.var.pais})" />
                        <h:outputText value="Cantidad disponible: #{cc.attrs.var.cantidad}" styleClass="itemInfo"/>  
                    </h:panelGrid>
                    <h:dataTable value="#{cc.attrs.var.precios}"
                                 var="precio" style="text-align: left">
                        <h:column >
                            <h:outputText value="#{precio.periodoNombre}:" style="text-align: left" />  
                        </h:column>        
                        <h:column>
                            <h:outputText value=" $ #{precio.precio}" 
                                  style="color: #0000ff;"/>  
                        </h:column>
                    </h:dataTable>
               </h:panelGrid>
        </div>
    </cc:implementation>
</html>
