<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.prime.com.tr/ui">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="var" type="java.lang.Object" required="true" />
        <cc:attribute name="bean" type="java.lang.Object" required="true"  />    
        <cc:attribute name="pubMethod" type="java.lang.String" required="true" />
        <cc:attribute name="propertyPub" type="java.lang.String" required="true" />
        <cc:attribute name="propertyUser" type="java.lang.String" required="true" />
        <cc:attribute name="propertyAlq" type="java.lang.String" required="true" />
        <cc:attribute name="userMethod" type="java.lang.String" required="true"/>
        <cc:attribute name="metodoAceptar" type="java.lang.String" required="true"/>
        <cc:attribute name="metodoRechazar" type="java.lang.String" required="true"/>
        <cc:attribute name="metodoCancelarPedido" type="java.lang.String" required="true"/>
        <cc:attribute name="lista" type="java.lang.String" required="true"/>
        <cc:attribute name="confirmable" type="java.lang.Boolean" default="false" />
        <cc:attribute name="cancelable" type="java.lang.Boolean" default="false" />
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <div class="item">

            <h:panelGrid columns="2" style="border: none; padding: 5px 10px;"
                         cellspacing="0" cellpadding="0" 
                         columnClasses="itemImgCol,itemContentCol,itemPriceCol" > 
                <h:graphicImage value="/image?id=#{cc.attrs.var.imagenId}" 
                                width="113" height="85" style="border: 1px solid gray; margin-top: 5px"
                                rendered="#{cc.attrs.var.imagenId != -1}" />
                <h:graphicImage value="#{resource['images:noImage.png']}"
                                width="113" height="85" style="border: 1px solid gray; margin-top: 5px"
                                rendered="#{cc.attrs.var.imagenId == -1}" />

                <h:panelGrid style="padding: 0 10px; text-align: left" columns="1"   >
                    
                    <h:commandLink value="#{cc.attrs.var.titulo}"
                                   action="#{cc.attrs.bean[cc.attrs.pubMethod]}" 
                                   styleClass="itemTitle" >
                        <f:setPropertyActionListener value="#{cc.attrs.var.idPublicacion}" target="#{cc.attrs.bean[cc.attrs.propertyPub]}" />
                    </h:commandLink>
                    
                    <h:commandLink value="Usuario" 
                                   action="#{cc.attrs.bean[cc.attrs.userMethod]}" >
                        <f:setPropertyActionListener value="#{cc.attrs.var.idUsuario}" target="#{cc.attrs.bean[cc.attrs.propertyUser]}" />
                    </h:commandLink>
                    
                    <h:outputText value="(#{cc.attrs.var.fechaDesde}, #{cc.attrs.var.fechaHasta})" />
                    <h:outputText value="Cantidad: #{cc.attrs.var.cantidad}" styleClass="itemInfo"/> 
                    
                    <p:commandButton value="Cancelar Pedido" actionListener="#{cc.attrs.bean[cc.attrs.metodoCancelarPedido]}"
                                         update="#{cc.attrs.lista}" rendered="#{cc.attrs.cancelable}">
                            <f:attribute name="alq" value="#{cc.attrs.var.idAlquiler}" />
                    </p:commandButton>
                    
                    <h:panelGrid columns="2" style="padding: 0 10px; text-align: left" width="50px" 
                                 cellspacing="0" cellpadding="0">   
                        <p:commandButton value="SI" actionListener="#{cc.attrs.bean[cc.attrs.metodoAceptar]}"
                                         update="#{cc.attrs.lista}" rendered="#{cc.attrs.confirmable}">
                            <f:attribute name="alq" value="#{cc.attrs.var.idAlquiler}" />
                        </p:commandButton>
                        <p:commandButton value="NO" actionListener="#{cc.attrs.bean[cc.attrs.metodoRechazar]}"
                                         update="#{cc.attrs.lista}" rendered="#{cc.attrs.confirmable}"> 
                            <f:attribute name="alq" value="#{cc.attrs.var.idAlquiler}" />
                        </p:commandButton>
                    </h:panelGrid> 
                    
                </h:panelGrid>

            </h:panelGrid>
        </div>
    </cc:implementation>
</html>